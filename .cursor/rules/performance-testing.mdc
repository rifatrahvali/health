---
description: Performance optimizasyonu ve test kurallarÄ±
---

# Performance ve Test KurallarÄ±

[CLAUDE.md](mdc:CLAUDE.md) dokÃ¼manÄ±na gÃ¶re performance ve test kurallarÄ±:

## âš¡ Performance KurallarÄ±

### ğŸš€ Optimizasyon Teknikleri
1. **Lazy Loading**: React.lazy ile ekran bileÅŸenleri
2. **Memoization**: useMemo ve useCallback akÄ±llÄ±ca kullan
3. **FlatList**: BÃ¼yÃ¼k listeler iÃ§in optimizasyon
4. **Image Optimizasyonu**: Uygun boyut ve format
5. **Debouncing**: KullanÄ±cÄ± girdilerini debounce et

### âœ… Performance Best Practices
```typescript
// Lazy loading ekranlar iÃ§in
const ProfileScreen = React.lazy(() => import('./ProfileScreen'));

// useMemo pahalÄ± hesaplamalar iÃ§in  
const expensiveValue = useMemo(() => {
  return heavyCalculation(data);
}, [data]);

// useCallback event handler'lar iÃ§in
const handlePress = useCallback(() => {
  onPress?.(data);
}, [onPress, data]);

// FlatList optimizasyonu
<FlatList
  data={items}
  renderItem={renderItem}
  keyExtractor={item => item.id}
  getItemLayout={(data, index) => ({
    length: ITEM_HEIGHT,
    offset: ITEM_HEIGHT * index,
    index
  })}
  removeClippedSubviews={true}
  maxToRenderPerBatch={10}
  windowSize={10}
/>

// Debounced search
const [searchTerm, setSearchTerm] = useState('');
const debouncedSearchTerm = useDebounce(searchTerm, 300);
```

### ğŸ¯ Performance Hedefleri
- App baÅŸlatma sÃ¼resi: < 2 saniye
- Ekran geÃ§iÅŸi: < 300ms  
- Crash oranÄ±: < 0.5%
- ANR oranÄ±: < 0.1%
- KullanÄ±cÄ± puanÄ±: > 4.5 yÄ±ldÄ±z

## ğŸ§ª Test KurallarÄ±

### ğŸ“Š Test Coverage Hedefleri
- Unit Testler: %80 coverage
- Integration Testler: Ana kullanÄ±cÄ± akÄ±ÅŸlarÄ±
- E2E Testler: Kritik yollar (onboarding, tracking)

### ğŸ”§ Test KomutlarÄ±
```bash
npm test              # TÃ¼m testleri Ã§alÄ±ÅŸtÄ±r
npm test:unit         # Sadece unit testler
npm test:integration  # Integration testler
npm test:e2e         # End-to-end testler  
npm test:coverage    # Coverage raporu
```

### âœ… Test Yazma KurallarÄ±
```typescript
// Unit test Ã¶rneÄŸi
import { render, fireEvent } from '@testing-library/react-native';
import { SymptomCard } from './SymptomCard';

describe('SymptomCard', () => {
  it('should display symptom name correctly', () => {
    const mockSymptom = {
      id: '1',
      name: 'KarÄ±n aÄŸrÄ±sÄ±',
      severity: 'moderate'
    };
    
    const { getByText } = render(
      <SymptomCard symptom={mockSymptom} />
    );
    
    expect(getByText('KarÄ±n aÄŸrÄ±sÄ±')).toBeTruthy();
  });
  
  it('should call onPress when pressed', () => {
    const mockOnPress = jest.fn();
    const { getByTestId } = render(
      <SymptomCard 
        symptom={mockSymptom} 
        onPress={mockOnPress}
        testID="symptom-card"
      />
    );
    
    fireEvent.press(getByTestId('symptom-card'));
    expect(mockOnPress).toHaveBeenCalledWith(mockSymptom);
  });
});
```

### ğŸ¯ Test Stratejisi
1. **Unit Testler**: BileÅŸen mantÄ±ÄŸÄ± ve utility fonksiyonlarÄ±
2. **Integration Testler**: Birden fazla bileÅŸenin birlikte Ã§alÄ±ÅŸmasÄ±
3. **E2E Testler**: KullanÄ±cÄ± senaryolarÄ± (kayÄ±t, giriÅŸ, veri giriÅŸi)
4. **Performance Testler**: Memory leak, render performance
5. **Accessibility Testler**: Screen reader desteÄŸi

## ğŸ” Code Quality Kontrolleri

### Pre-commit Kontrolleri
1. Linting geÃ§meli
2. TypeScript derlenmeli  
3. Testler geÃ§meli
4. console.log production'da olmamalÄ±

### Code Review Checklist
- [ ] TasarÄ±m sistemine uygunluk
- [ ] TypeScript tipleri tam
- [ ] Hata yakalama implementasyonu
- [ ] Loading state'leri mevcut
- [ ] Accessibility dÃ¼ÅŸÃ¼nÃ¼lmÃ¼ÅŸ
- [ ] Performance optimize edilmiÅŸ  
- [ ] Testler yazÄ±lmÄ±ÅŸ
- [ ] DokÃ¼mantasyon gÃ¼ncel

## ğŸš¨ Monitoring
```typescript
// Performance monitoring
import perf from '@react-native-firebase/perf';

const trace = perf().newTrace('symptom_entry_flow');
trace.start();
// ... user flow
trace.stop();

// Crash reporting
import crashlytics from '@react-native-firebase/crashlytics';

crashlytics().recordError(error);
crashlytics().log('KullanÄ±cÄ± semptom ekledi');
```